<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Financial Statement Analysis</title>
    <!-- 引入 echarts.js -->
    <script src="echarts/echarts.min.js"></script>
</head>
<body>
	<select>
		<option value="000651.sz">格力电器</option>
		<option value="002415.sz">海康威视</option>
		<option value="300059.sz">东方财富</option>
		<option value="600337.sh">美克家居</option>
		<option value="600338.sh">西藏珠峰</option>
	</select>
	<nav>
	<a href="javascript:void(0);" onclick="drawChart('loans_line');">负债折线图</a> |
	<a href="javascript:void(0);" onclick="drawChart('loans_stack_bar');">负债叠柱图</a> |
	<a href="javascript:void(0);" onclick="drawChart('yoy_line');">同比折线图</a> |
	<a href="javascript:void(0);" onclick="drawChart('HTML');">图4</a>
	</nav>
    <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
    <div id="main" style="width: 50vw;height:50vh;"></div>
    <script type="text/javascript">
	    var dataMap = {};
		dataMap["000651.SZ"] = {"balancesheet": {"资产负债表": ["2018-12-31", "2017-12-31", "2016-12-31", "2015-12-31", "2014-12-31"], "递延收益": [166300000, 126200000, 172100000, 134600000, 88440000], "递延所得税资产": [11350000000, 10840000000, 9668000000, 8764000000, 8193000000], "其他应付款": [4747000000, 2801000000, 2224000000, 2608000000, 2546000000], "发放委托贷款及垫款": [9071000000, 6673000000, 4737000000, 7873000000, 6442000000], "应付股利": [0, 707900, 87730000, 707900, 707900], "应付职工薪酬": [2473000000, 1877000000, 1703000000, 1697000000, 1550000000], "少数股东权益": [1388000000, 1240000000, 980000000, 1045000000, 978800000], "长期借款": [0, 0, 0, 0, 2259000000], "卖出回购金融资产款": [0, 0, 0, 0, 586000000], "以公允价值计量且其变动计入当期损益的金融资产": [1012000000, 602000000, 0, 0, 0], "长期待摊费用": [4238000, 2209000, 1051000, 8182000, 20950000], "归属于母公司股东权益合计": [91330000000, 65610000000, 53970000000, 47520000000, 44150000000], "固定资产": [18390000000, 17480000000, 17680000000, 15430000000, 14940000000], "长期股权投资": [2251000000, 110400000, 103900000, 95460000, 92210000], "买入返售金融资产": [0, 0, 0, 1000000000, 0], "流动资产合计": [199700000000, 171600000000, 142900000000, 120900000000, 120100000000], "未分配利润": [81940000000, 55740000000, 44230000000, 37740000000, 34840000000], "一般风险准备": [329400000, 327300000, 267400000, 207800000, 136400000], "吸收存款及同业存放": [315900000, 266900000, 145200000, 566600000, 806500000], "其他非流动资产": [787500000, 1010000000, 1312000000, 657000000, 0], "盈余公积": [3500000000, 3500000000, 3500000000, 3500000000, 2958000000], "向中央银行借款": [0, 0, 4274000, 8000000, 17460000], "资本公积": [93380000, 124900000, 183400000, 186000000, 3191000000], "实收资本（或股本）": [6016000000, 6016000000, 6016000000, 6016000000, 3008000000], "资产总计": [251200000000, 215000000000, 182400000000, 161700000000, 156200000000], "可供出售金融资产": [2216000000, 2175000000, 1384000000, 2705000000, 2150000000], "流动负债合计": [157700000000, 147500000000, 126900000000, 112600000000, 108400000000], "股东权益合计": [92710000000, 66850000000, 54950000000, 48570000000, 45130000000], "非流动资产": [], "货币资金": [113100000000, 99610000000, 95750000000, 88820000000, 54550000000], "递延所得税负债": [536200000, 403500000, 280000000, 244100000, 256800000], "应付票据": [10840000000, 9767000000, 9127000000, 7428000000, 6882000000], "存货同比": [0.20760410380205, 0.83601108033241, -0.047392864682288, 0.10175601814164], "在建工程": [1664000000, 1021000000, 581500000, 2045000000, 1254000000], "预付款项": [2162000000, 3718000000, 1815000000, 847900000, 1591000000], "应交税费": [4848000000, 3909000000, 3126000000, 2978000000, 8309000000], "非流动负债": [], "所有者权益(或股东权益)": [], "应收票据": [35910000000, 32260000000, 29960000000, 14880000000, 50480000000], "短期借款": [22070000000, 18650000000, 10700000000, 6277000000, 3579000000], "一年内到期的非流动负债": [0, 0, 0, 2404000000, 2061000000], "负债和股东权益合计": [251200000000, 215000000000, 182400000000, 161700000000, 156200000000], "负债合计": [158500000000, 148100000000, 127400000000, 113100000000, 111100000000], "固定资产清理": [0, 14740000, 36950000, 22010000, 7721000], "应收账款": [7700000000, 5814000000, 2824000000, 2879000000, 2661000000], "应付账款": [38990000000, 34550000000, 29540000000, 24790000000, 26780000000], "应付利息": [0, 196100000, 41780000, 48390000, 36180000], "流动资产": [], "其他应收款": [2554000000, 2161000000, 245000000, 254000000, 380600000], "商誉": [51800000, 0, 0, 0, 0], "长期应付职工薪酬": [130800000, 112700000, 117700000, 127500000, 106700000], "非流动资产合计": [51520000000, 43430000000, 39460000000, 40750000000, 36090000000], "其他流动负债": [63360000000, 60910000000, 59730000000, 55010000000, 48590000000], "流动负债": [], "预收款项": [9792000000, 14140000000, 10020000000, 7620000000, 6428000000], "应收利息": [0, 1889000000, 1046000000, 1110000000, 1242000000], "其他流动资产": [17110000000, 10340000000, 1993000000, 1685000000, 558400000], "存货": [20010000000, 16570000000, 9025000000, 9474000000, 8599000000], "投资性房地产": [537600000, 516600000, 597700000, 491500000, 507900000], "无形资产": [5205000000, 3604000000, 3355000000, 2656000000, 2480000000], "非流动负债合计": [833300000, 642400000, 569800000, 506200000, 2711000000]}, "profitstatement": {"减:所得税费用": [4894000000, 4108000000, 3007000000, 2286000000, 2499000000], "净利率": [0.1319, 0.15006666666667, 0.14141689373297, 0.12544731610338, 0.10178571428571], "净利润": [26380000000, 22510000000, 15570000000, 12620000000, 14250000000], "其中:对联营企业和合营企业的投资收益": [560500, 6487000, 8034000, 3246000, -3601000], "手续费及佣金收入": [1533000, 1295000, 954900, 3101000, 983900], "归属于母公司股东的其他综合收益": [-459100000, 129100000, -89380000, -142700000, 17070000], "其中:非流动资产处置利得": [0, 0, 2839000, 1040000, 1460000], "财务费用": [-948200000, 431300000, -4845000000, -1929000000, -942200000], "利润总额": [31270000000, 26620000000, 18570000000, 14910000000, 16750000000], "销售费用": [18900000000, 16660000000, 16480000000, 15510000000, 28890000000], "研发费用": [6988000000, 3618000000, 0, 0, 0], "营业利润": [31000000000, 26130000000, 17500000000, 13520000000, 16090000000], "营业总收入": [200000000000, 150000000000, 110100000000, 100600000000, 140000000000], "管理费用": [4366000000, 2454000000, 5486000000, 5049000000, 4818000000], "基本每股收益": [4.36, 3.72, 2.57, 2.08, 2.35], "利润表": ["2018-12-31", "2017-12-31", "2016-12-31", "2015-12-31", "2014-12-31"], "营业总成本": [169600000000, 124700000000, 91480000000, 86130000000, 123300000000], "其中:归属于母公司股东的净利润": [26200000000, 22400000000, 15460000000, 12530000000, 14160000000], "其他经营收益": [], "手续费及佣金支出": [657700, 489600, 333500, 399800, 325600], "少数股东损益": [176200000, 107000000, 102800000, 91290000, 97790000], "毛利率同比": [-0.081086439333862, -0.0050266057511422, -0.016792137543607, -0.074196605668031], "其中:非流动资产处置净损失": [0, 0, 15080000, 9119000, 15060000], "归母净利润同比": [0.16964285714286, 0.44890038809832, 0.23383878691141, -0.11511299435028], "营业总收入同比": [0.33333333333333, 0.36239782016349, 0.094433399602386, -0.28142857142857], "每股收益": [], "加:营业外收入": [317900000, 510600000, 1094000000, 1404000000, 706100000], "毛利率": [0.309, 0.33626666666667, 0.33796548592189, 0.34373757455268, 0.37128571428571], "净利率同比": [-0.12105730786317, 0.061165061014772, 0.12730107048627, 0.23246485996303], "营业税金及附加": [1742000000, 1513000000, 1430000000, 751900000, 1362000000], "稀释每股收益": [4.36, 3.72, 2.57, 2.08, 2.35], "投资收益": [106800000, 396600000, -2221000000, 96650000, 724400000], "扣除非经常性损益后的净利润": [25580000000, 21170000000, 15640000000, 12260000000, 14140000000], "综合收益总额": [25920000000, 22630000000, 15470000000, 12480000000, 14270000000], "归属于少数股东的其他综合收益": [1831000, -3357000, -2226000, 2953000, 4108000], "其他综合收益": [-457300000, 125700000, -91600000, -139700000, 21180000], "归属于少数股东的综合收益总额": [178100000, 103700000, 100600000, 94240000, 101900000], "利息收入": [1899000000, 1732000000, 1810000000, 2816000000, 2254000000], "归属于母公司所有者的综合收益总额": [25740000000, 22530000000, 15370000000, 12390000000, 14170000000], "毛利润": [61800000000, 50440000000, 37210000000, 34580000000, 51980000000], "营业收入": [198100000000, 148300000000, 108300000000, 97750000000, 137800000000], "营业成本": [138200000000, 99560000000, 72890000000, 66020000000, 88020000000], "资产减值损失": [261700000, 264800000, -43910000, 86320000, 398400000], "减:营业外支出": [41230000, 20540000, 24410000, 11050000, 42860000], "利息支出": [45340000, 195900000, 93320000, 652400000, 709800000], "加:公允价值变动收益": [46260000, 9213000, 1093000000, -1010000000, -1382000000]}};

		
	    function drawChart(chartType) {
		    console.log(chartType);
		    myChart.setOption(options[chartType]);
		}
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('main'));
		var options = {};
        options['loans_line'] = {
			title: {
				text: '负债折线图'
			},
			tooltip: {
				trigger: 'axis', 
				formatter: function (params, ticket, callback) {
				    var tooltipHtml = params[0].name + '<br>';
					for(var i = 0, plen = params.length; i < plen; i++) {
					    tooltipHtml += params[i].marker + params[i].seriesName + ': ' + (params[i].value / 100000000).toFixed(2) + '亿<br>'
					}
					return tooltipHtml;
				}
			},
			legend: {
				data:['短期借款','长期借款','货币资金']
			},
			grid: {
				left: '3%',
				right: '4%',
				bottom: '3%',
				containLabel: true
			},
			toolbox: {
				feature: {
					saveAsImage: {}
				}
			},
			xAxis: {
				type: 'category',
				boundaryGap: false,
				data: ['2014-12-31', '2015-12-31', '2016-12-31', '2017-12-31', '2018-12-31']
			},
			yAxis: {
				type: 'value',
				name: '金额', 
				axisLabel: {
				    formatter: function (value, index) {
					    return (value / 100000000) + '亿';
					}
				}
			},
			series: [
				{
					name:'短期借款',
					type:'line',
					data:[3579000000, 6277000000, 10700000000, 18650000000, 22070000000]
				},
				{
					name:'长期借款',
					type:'line',
					data:[2259000000, 0, 0, 0, 0]
				},
				{
					name:'货币资金',
					type:'line',
					data:[54550000000, 88820000000, 95750000000, 99610000000, 113100000000]
				}
			]
		};
		
		options['loans_stack_bar'] = {
			title: {
				text: '负债叠柱图'
			},
			tooltip : {
				trigger: 'axis',
				axisPointer : {            // 坐标轴指示器，坐标轴触发有效
					type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
				}, 
				formatter: function (params, ticket, callback) {
				    var tooltipHtml = params[0].name + '<br>';
					for(var i = 0, plen = params.length; i < plen; i++) {
					    tooltipHtml += params[i].marker + params[i].seriesName + ': ' + (params[i].value / 100000000).toFixed(2) + '亿<br>'
					}
					return tooltipHtml;
				}
			},
			legend: {
				data:['短期借款','长期借款','货币资金']
			},
			grid: {
				left: '3%',
				right: '4%',
				bottom: '3%',
				containLabel: true
			},
			xAxis : [
				{
					type : 'category',
					data : ['2014-12-31', '2015-12-31', '2016-12-31', '2017-12-31', '2018-12-31']
				}
			],
			yAxis : {
				type : 'value', 
				axisLabel: {
					formatter: function (value, index) {
						return (value / 100000000) + '亿';
					}
				}
			},
			series : [
				{
					name:'短期借款',
					type:'bar',
					stack: '负债',
					data:[3579000000, 6277000000, 10700000000, 18650000000, 22070000000]
				},
				{
					name:'长期借款',
					type:'bar',
					stack: '负债',
					data:[2259000000, 0, 0, 0, 0]
				}, 
				{
					name:'货币资金',
					type:'bar',
					data:[54550000000, 88820000000, 95750000000, 99610000000, 113100000000]
				}
			]
		};
		
		options['yoy_line'] = {
			title: {
				text: '同比折线图'
			},
			tooltip: {
				trigger: 'axis', 
				formatter: function (params, ticket, callback) {
				    var tooltipHtml = params[0].name + '<br>';
					for(var i = 0, plen = params.length; i < plen; i++) {
					    tooltipHtml += params[i].marker + params[i].seriesName + ': ' + params[i].value + '%<br>'
					}
					return tooltipHtml;
				}
			},
			legend: {
				data:['营业收入同比','净利润同比','毛利率同比','净利率同比','存货同比']
			},
			grid: {
				left: '3%',
				right: '4%',
				bottom: '3%',
				containLabel: true
			},
			toolbox: {
				feature: {
					saveAsImage: {}
				}
			},
			xAxis: {
				type: 'category',
				boundaryGap: false,
				data: ['2015-12-31', '2016-12-31', '2017-12-31', '2018-12-31']
			},
			yAxis: {
				type: 'value',
				name: '百分比', 
				axisLabel: {
					formatter: '{value} %'
				}
			},
			series: [
				{
					name:'营业收入同比',
					type:'line',
					data:[-28.14, 9.44, 36.24, 33.33]
				},
				{
					name:'净利润同比',
					type:'line',
					data:[-11.51, 23.38, 44.89, 16.96]
				},
				{
					name:'毛利率同比',
					type:'line',
					data:[-7.42, -1.68, -0.50, -8.11]
				},
				{
					name:'净利率同比',
					type:'line',
					data:[23.25, 12.73, 6.12, -12.11]
				},
				{
					name:'存货同比',
					type:'line',
					data:[10.18, -4.74, 83.60, 20.76]
				}
			]
		};

        // 使用刚指定的配置项和数据显示图表。
        drawChart('loans_line');
    </script>
</body>
</html>