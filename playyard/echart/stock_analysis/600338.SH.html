<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Financial Statement Analysis</title>
    <!-- 引入 echarts.js -->
    <script src="echarts/echarts.min.js"></script>
</head>
<body>
	<select>
		<option value="000651.sz">格力电器</option>
		<option value="002415.sz">海康威视</option>
		<option value="300059.sz">东方财富</option>
		<option value="600337.sh">美克家居</option>
		<option value="600338.sh">西藏珠峰</option>
	</select>
	<nav>
	<a href="javascript:void(0);" onclick="drawChart('loans_line');">负债折线图</a> |
	<a href="javascript:void(0);" onclick="drawChart('loans_stack_bar');">负债叠柱图</a> |
	<a href="javascript:void(0);" onclick="drawChart('yoy_line');">同比折线图</a> |
	<a href="javascript:void(0);" onclick="drawChart('HTML');">图4</a>
	</nav>
    <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
    <div id="main" style="width: 50vw;height:50vh;"></div>
    <script type="text/javascript">
	    var dataMap = {};
		dataMap["600338.SH"] = {"balancesheet": {"资产负债表": ["2018-12-31", "2017-12-31", "2016-12-31", "2015-12-31", "2014-12-31"], "递延所得税资产": [9646000, 8164000, 6508000, 5494000, 10950000], "应付职工薪酬": [9078000, 11660000, 16670000, 14670000, 7712000], "持有至到期投资": [30000000, 30000000, 30000000, 0, 0], "流动负债合计": [2024000000, 1248000000, 644900000, 532900000, 563500000], "流动负债": [], "长期待摊费用": [8905000, 6307000, 6602000, 7938000, 11510000], "固定资产": [1104000000, 960000000, 875700000, 604800000, 599200000], "长期股权投资": [1122000, 1201000, 1169000, 1235000, 1578000], "在建工程": [468700000, 367500000, 128000000, 96180000, 24880000], "商誉": [0, 0, 0, 0, 410900], "实收资本（或股本）": [653000000, 653000000, 653000000, 653000000, 158300000], "其他非流动资产": [16770000, 18500000, 149400000, 96590000, 33520000], "非流动负债": [], "递延收益": [0, 0, 3664000, 4011000, 4009000], "盈余公积": [149100000, 63840000, 14260000, 14260000, 14260000], "少数股东权益": [0, 0, 1064000, 3996000, 23970000], "资产总计": [4791000000, 3235000000, 1947000000, 1207000000, 1320000000], "归属于母公司股东权益合计": [2172000000, 1704000000, 1298000000, 666400000, 728800000], "未分配利润": [2047000000, 1623000000, 951000000, 300800000, 140700000], "股东权益合计": [2172000000, 1704000000, 1299000000, 670400000, 752700000], "非流动资产": [], "专项储备": [0, 0, 9855000, 9855000, 8493000], "资本公积": [22360000, 22360000, 22360000, 22360000, 576400000], "应付票据": [0, 0, 0, 0, 63330000], "存货同比": [0.05983545250561, -0.066992323796232, 0.79596440656724, -0.44551772063933], "其他流动资产": [139000000, 49360000, 16570000, 10460000, 3281000], "预付款项": [30100000, 33880000, 42330000, 11450000, 35100000], "应交税费": [8600000, 29640000, 65470000, 54960000, 53960000], "存货": [141700000, 133700000, 143300000, 79790000, 143900000], "所有者权益(或股东权益)": [], "递延所得税负债": [0, 0, 0, 11570, 32750], "短期借款": [1267000000, 711800000, 0, 32000000, 32000000], "长期借款": [594500000, 283000000, 0, 0, 0], "负债和股东权益合计": [4791000000, 3235000000, 1947000000, 1207000000, 1320000000], "负债合计": [2618000000, 1531000000, 648500000, 537000000, 567600000], "固定资产清理": [0, 0, 0, 106800, 0], "应收账款": [251300000, 135900000, 125100000, 170800000, 134800000], "应付账款": [192800000, 284600000, 161400000, 208000000, 182000000], "一年内到期的非流动负债": [254800000, 0, 289000, 111500000, 97980000], "流动资产": [], "其他应收款": [1369000000, 129600000, 19530000, 10100000, 119500000], "其他应付款": [282000000, 198100000, 391300000, 107800000, 72490000], "应付利息": [0, 10300000, 0, 57680, 69000], "非流动资产合计": [1643000000, 1396000000, 1202000000, 817600000, 716700000], "其他流动负债": [7464000, 11420000, 0, 0, 0], "流动资产合计": [3148000000, 1839000000, 745200000, 389700000, 603600000], "预收款项": [1112000, 1060000, 6466000, 4077000, 54000000], "应收利息": [0, 7056000, 0, 0, 0], "应收票据": [0, 0, 0, 150000, 500000], "无形资产": [1619000, 1780000, 2273000, 2563000, 31820000], "投资性房地产": [2230000, 2384000, 2539000, 2693000, 2848000], "货币资金": [1215000000, 1356000000, 398400000, 107000000, 166400000], "非流动负债合计": [594500000, 283000000, 3664000, 4022000, 4042000]}, "profitstatement": {"减:所得税费用": [202400000, 256500000, 118700000, 61090000, 63020000], "净利率": [0.44022482893451, 0.45115524929064, 0.43825321597833, 0.093628437290409, 0.11033210332103], "净利润": [900700000, 1113000000, 647300000, 139600000, 269100000], "其中:对联营企业和合营企业的投资收益": [-3636000, 54900, 87320, 170300, -1988000], "归属于母公司股东的其他综合收益": [-40620000, -305700000, -18920000, -164500000, -66720000], "其中:非流动资产处置利得": [0, 0, 86610, 574300, 0], "财务费用": [-56420000, -13460000, -15260000, -21430000, 3461000], "利润总额": [1103000000, 1370000000, 766000000, 200700000, 332100000], "销售费用": [112200000, 135000000, 108200000, 95070000, 103300000], "营业利润": [1097000000, 1410000000, 769100000, 200300000, 332700000], "营业总收入": [2046000000, 2467000000, 1477000000, 1491000000, 2439000000], "管理费用": [117700000, 124200000, 107300000, 129400000, 114300000], "基本每股收益": [1.38, 1.71, 1, 0.25, 0.41], "资产减值损失": [6281000, 425200, -3207000, 85700000, 6932000], "营业总成本": [939400000, 1080000000, 723200000, 1285000000, 2183000000], "其中:归属于母公司股东的净利润": [900700000, 1114000000, 650300000, 160000000, 267200000], "其他经营收益": [], "其中:非流动资产处置净损失": [0, 0, 773700, 5068.63, 363400], "归母净利润同比": [-0.19147217235189, 0.71305551284023, 3.064375, -0.40119760479042], "每股收益": [], "加:营业外收入": [15380000, 346100, 1610000, 1449000, 2049000], "毛利率同比": [-0.041583359273033, 0.035037813020219, 0.9424163129706, 0.6576873671407], "净利率同比": [-0.024227625353614, 0.029439677432829, 3.6807703798259, -0.15139443124746], "营业税金及附加": [136500000, 156500000, 84580000, 43530000, 46650000], "营业总收入同比": [-0.17065261451155, 0.67027758970887, -0.0093896713615024, -0.38868388683887], "投资收益": [-14320000, 18820000, 18910000, -5921000, 75460000], "毛利率": [0.69540566959922, 0.72557762464532, 0.70101557210562, 0.36089872568746, 0.21771217712177], "扣除非经常性损益后的净利润": [900600000, 1131000000, 638400000, -47230000, -67390000], "综合收益总额": [860000000, 807600000, 628400000, -24850000, 202300000], "稀释每股收益": [1.38, 1.71, 1, 0.25, 0.41], "归属于少数股东的综合收益总额": [0, -342600, -2932000, -20430000, 1822000], "其他综合收益": [-40620000, -305700000, -18920000, -164500000, -66720000], "归属于母公司所有者的综合收益总额": [860000000, 807900000, 631300000, -4417000, 200500000], "毛利润": [1422800000, 1790000000, 1035400000, 538100000, 531000000], "营业收入": [2046000000, 2467000000, 1477000000, 1491000000, 2439000000], "营业成本": [623200000, 677000000, 441600000, 952900000, 1908000000], "少数股东损益": [0, -342600, -2932000, -20430000, 1822000], "加:公允价值变动收益": [4585000, 4529000, -3345000, -84700, 1176000], "减:营业外支出": [9492000, 40720000, 4723000, 1022000, 2680000], "利润表": ["2018-12-31", "2017-12-31", "2016-12-31", "2015-12-31", "2014-12-31"]}};

		
	    function drawChart(chartType) {
		    console.log(chartType);
		    myChart.setOption(options[chartType]);
		}
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('main'));
		var options = {};
        options['loans_line'] = {
			title: {
				text: '负债折线图'
			},
			tooltip: {
				trigger: 'axis', 
				formatter: function (params, ticket, callback) {
				    var tooltipHtml = params[0].name + '<br>';
					for(var i = 0, plen = params.length; i < plen; i++) {
					    tooltipHtml += params[i].marker + params[i].seriesName + ': ' + (params[i].value / 100000000).toFixed(2) + '亿<br>'
					}
					return tooltipHtml;
				}
			},
			legend: {
				data:['短期借款','长期借款','货币资金']
			},
			grid: {
				left: '3%',
				right: '4%',
				bottom: '3%',
				containLabel: true
			},
			toolbox: {
				feature: {
					saveAsImage: {}
				}
			},
			xAxis: {
				type: 'category',
				boundaryGap: false,
				data: ['2014-12-31', '2015-12-31', '2016-12-31', '2017-12-31', '2018-12-31']
			},
			yAxis: {
				type: 'value',
				name: '金额', 
				axisLabel: {
				    formatter: function (value, index) {
					    return (value / 100000000) + '亿';
					}
				}
			},
			series: [
				{
					name:'短期借款',
					type:'line',
					data:[32000000, 32000000, 0, 711800000, 1267000000]
				},
				{
					name:'长期借款',
					type:'line',
					data:[0, 0, 0, 283000000, 594500000]
				},
				{
					name:'货币资金',
					type:'line',
					data:[166400000, 107000000, 398400000, 1356000000, 1215000000]
				}
			]
		};
		
		options['loans_stack_bar'] = {
			title: {
				text: '负债叠柱图'
			},
			tooltip : {
				trigger: 'axis',
				axisPointer : {            // 坐标轴指示器，坐标轴触发有效
					type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
				}, 
				formatter: function (params, ticket, callback) {
				    var tooltipHtml = params[0].name + '<br>';
					for(var i = 0, plen = params.length; i < plen; i++) {
					    tooltipHtml += params[i].marker + params[i].seriesName + ': ' + (params[i].value / 100000000).toFixed(2) + '亿<br>'
					}
					return tooltipHtml;
				}
			},
			legend: {
				data:['短期借款','长期借款','货币资金']
			},
			grid: {
				left: '3%',
				right: '4%',
				bottom: '3%',
				containLabel: true
			},
			xAxis : [
				{
					type : 'category',
					data : ['2014-12-31', '2015-12-31', '2016-12-31', '2017-12-31', '2018-12-31']
				}
			],
			yAxis : {
				type : 'value', 
				axisLabel: {
					formatter: function (value, index) {
						return (value / 100000000) + '亿';
					}
				}
			},
			series : [
				{
					name:'短期借款',
					type:'bar',
					stack: '负债',
					data:[32000000, 32000000, 0, 711800000, 1267000000]
				},
				{
					name:'长期借款',
					type:'bar',
					stack: '负债',
					data:[0, 0, 0, 283000000, 594500000]
				}, 
				{
					name:'货币资金',
					type:'bar',
					data:[166400000, 107000000, 398400000, 1356000000, 1215000000]
				}
			]
		};
		
		options['yoy_line'] = {
			title: {
				text: '同比折线图'
			},
			tooltip: {
				trigger: 'axis', 
				formatter: function (params, ticket, callback) {
				    var tooltipHtml = params[0].name + '<br>';
					for(var i = 0, plen = params.length; i < plen; i++) {
					    tooltipHtml += params[i].marker + params[i].seriesName + ': ' + params[i].value + '%<br>'
					}
					return tooltipHtml;
				}
			},
			legend: {
				data:['营业收入同比','净利润同比','毛利率同比','净利率同比','存货同比']
			},
			grid: {
				left: '3%',
				right: '4%',
				bottom: '3%',
				containLabel: true
			},
			toolbox: {
				feature: {
					saveAsImage: {}
				}
			},
			xAxis: {
				type: 'category',
				boundaryGap: false,
				data: ['2015-12-31', '2016-12-31', '2017-12-31', '2018-12-31']
			},
			yAxis: {
				type: 'value',
				name: '百分比', 
				axisLabel: {
					formatter: '{value} %'
				}
			},
			series: [
				{
					name:'营业收入同比',
					type:'line',
					data:[-38.87, -0.94, 67.03, -17.07]
				},
				{
					name:'净利润同比',
					type:'line',
					data:[-40.12, 306.44, 71.31, -19.15]
				},
				{
					name:'毛利率同比',
					type:'line',
					data:[65.77, 94.24, 3.50, -4.16]
				},
				{
					name:'净利率同比',
					type:'line',
					data:[-15.14, 368.08, 2.94, -2.42]
				},
				{
					name:'存货同比',
					type:'line',
					data:[-44.55, 79.60, -6.70, 5.98]
				}
			]
		};

        // 使用刚指定的配置项和数据显示图表。
        drawChart('loans_line');
    </script>
</body>
</html>