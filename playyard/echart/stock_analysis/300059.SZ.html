<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Financial Statement Analysis</title>
    <!-- 引入 echarts.js -->
    <script src="echarts/echarts.min.js"></script>
</head>
<body>
	<select>
		<option value="000651.sz">格力电器</option>
		<option value="002415.sz">海康威视</option>
		<option value="300059.sz">东方财富</option>
		<option value="600337.sh">美克家居</option>
		<option value="600338.sh">西藏珠峰</option>
	</select>
	<nav>
	<a href="javascript:void(0);" onclick="drawChart('loans_line');">负债折线图</a> |
	<a href="javascript:void(0);" onclick="drawChart('loans_stack_bar');">负债叠柱图</a> |
	<a href="javascript:void(0);" onclick="drawChart('yoy_line');">同比折线图</a> |
	<a href="javascript:void(0);" onclick="drawChart('HTML');">图4</a>
	</nav>
    <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
    <div id="main" style="width: 50vw;height:50vh;"></div>
    <script type="text/javascript">
	    var dataMap = {};
		dataMap["300059.SZ"] = {"balancesheet": {"资产负债表": ["2018-12-31", "2017-12-31", "2016-12-31", "2015-12-31", "2014-12-31"], "递延所得税资产": [69330000, 116300000, 51290000, 52140000, 9091000], "发放委托贷款及垫款": [14760000, 2887000, 0, 0, 0], "应付职工薪酬": [245400000, 235600000, 211100000, 212800000, 11010000], "应付利息": [0, 78590000, 5907000, 5569000, 0], "卖出回购金融资产款": [85990000, 3658000000, 942500000, 1639000000, 0], "以公允价值计量且其变动计入当期损益的金融资产": [5563000000, 2669000000, 1172000000, 1968000000, 0], "长期待摊费用": [90160000, 78640000, 38570000, 39550000, 11360000], "负债和股东权益合计": [39810000000, 41840000000, 26990000000, 23730000000, 6183000000], "固定资产": [1716000000, 1761000000, 1781000000, 395600000, 48480000], "长期股权投资": [444800000, 410400000, 305800000, 266300000, 0], "在建工程": [9942000, 43830000, 29260000, 19080000, 0], "流动资产合计": [34370000000, 36340000000, 21650000000, 19740000000, 5950000000], "其中:交易性金融资产": [5563000000, 0, 0, 0, 0], "少数股东权益": [0, 2580000, 6145000, 7504000, 0], "归属于母公司股东权益合计": [15700000000, 14680000000, 12830000000, 8169000000, 1880000000], "其他非流动资产": [0, 0, 36900000, 0, 0], "未分配利润": [3413000000, 2623000000, 2175000000, 1681000000, 319400000], "递延收益": [1714000, 1190000, 4510000, 5464000, 4588000], "盈余公积": [394800000, 311400000, 265100000, 230900000, 58060000], "资本公积": [5504000000, 6244000000, 6827000000, 4404000000, 292700000], "资产总计": [39810000000, 41840000000, 26990000000, 23730000000, 6183000000], "可供出售金融资产": [89010000, 89990000, 96600000, 97920000, 28200000], "其中:其他权益工具": [0, 1219000000, 0, 0, 0], "股东权益合计": [15700000000, 14680000000, 12830000000, 8177000000, 1880000000], "非流动资产": [], "存货": [145700000, 142200000, 134900000, 0, 0], "应付债券": [4815000000, 5408000000, 300000000, 500000000, 0], "非流动负债": [], "存货同比": [0.024613220815753, 0.054114158636027, 0, 0], "货币资金": [11330000000, 12080000000, 9694000000, 12250000000, 4028000000], "预付款项": [64110000, 56670000, 67470000, 59420000, 20580000], "应交税费": [34980000, 62180000, 28000000, 54260000, 46780000], "递延所得税负债": [10070000, 11210000, 11590000, 16720000, 0], "所有者权益(或股东权益)": [], "流动负债合计": [19290000000, 21740000000, 13840000000, 15030000000, 4298000000], "短期借款": [213100000, 298000000, 73580000, 0, 0], "一年内到期的非流动负债": [606400000, 0, 0, 0, 0], "结算备付金": [2776000000, 2335000000, 2071000000, 1455000000, 5706000], "负债合计": [24120000000, 27160000000, 14150000000, 15560000000, 4303000000], "代理买卖证券款": [14290000000, 13170000000, 10960000000, 11900000000, 4052000000], "应收账款": [257900000, 329300000, 276700000, 328400000, 104000000], "应付账款": [105500000, 81970000, 111800000, 103000000, 51000000], "其他应付款": [1651000000, 965800000, 781200000, 737500000, 859100], "流动资产": [], "其他应收款": [3101000000, 2480000000, 1679000000, 1451000000, 1557000000], "应付短期债券": [1917000000, 3137000000, 600000000, 200000000, 0], "其他权益工具": [1219000000, 1219000000, 0, 0, 0], "非流动资产合计": [5439000000, 5505000000, 5340000000, 3989000000, 232400000], "流动负债": [], "商誉": [2927000000, 2932000000, 2932000000, 2932000000, 4732000], "预收款项": [137000000, 135200000, 127100000, 184900000, 137300000], "应收利息": [0, 185000000, 59350000, 50980000, 14370000], "其他流动资产": [847500000, 342400000, 557300000, 283800000, 220300000], "买入返售金融资产": [1509000000, 5468000000, 1213000000, 31200000, 0], "实收资本（或股本）": [5168000000, 4289000000, 3558000000, 1854000000, 1210000000], "无形资产": [77320000, 69200000, 68270000, 186700000, 130500000], "非流动负债合计": [4827000000, 5420000000, 316100000, 522200000, 4588000]}, "profitstatement": {"减:所得税费用": [162600000, 44240000, 85740000, 322400000, 31580000], "净利率": [0.30682036503362, 0.249234393404, 0.30289115646259, 0.63192071086808, 0.27075163398693], "净利润": [958200000, 634800000, 712400000, 1849000000, 165700000], "其中:对联营企业和合营企业的投资收益": [60580000, 83920000, 39520000, 16260000, 0], "手续费及佣金收入": [1196000000, 1019000000, 913700000, 106600000, 0], "归属于母公司股东的其他综合收益": [5213000, -8599000, -440600, 125300, 2528], "其中:非流动资产处置利得": [0, 0, 308100, 0, 0], "财务费用": [156500000, -32300000, -66540000, -108400000, -59690000], "利润总额": [1121000000, 679100000, 798200000, 2171000000, 197300000], "销售费用": [259800000, 315800000, 266000000, 202500000, 115200000], "研发费用": [250300000, 182000000, 0, 0, 0], "营业利润": [1131000000, 682000000, 667400000, 2111000000, 193900000], "营业总收入": [3123000000, 2547000000, 2352000000, 2926000000, 612000000], "管理费用": [1192000000, 1101000000, 1114000000, 394400000, 183900000], "基本每股收益": [0.19, 0.12, 0.17, 0.61, 0.09], "资产减值损失": [11910000, 81450000, 17170000, 18220000, 6287000], "营业总成本": [2272000000, 2072000000, 1705000000, 876400000, 418100000], "其中:归属于母公司股东的净利润": [958700000, 636900000, 713800000, 1849000000, 165700000], "其他经营收益": [], "汇兑收益": [408000, -584800, 535400, 117800, 0], "毛利率": [0.8811079090618, 0.8441303494307, 0.86262755102041, 0.88923444976077, 0.75718954248366], "其中:非流动资产处置净损失": [0, 0, 5985000, 131800, 20510], "毛利率同比": [0.043805509014141, -0.021442859746161, -0.029921129065024, 0.17438818138452], "归母净利润同比": [0.50525985241011, -0.10773325861586, -0.61395348837209, 10.15872057936], "每股收益": [], "加:营业外收入": [165200, 575700, 140200000, 62880000, 4880000], "营业总收入同比": [0.22614840989399, 0.082908163265306, -0.19617224880383, 3.781045751634], "净利率同比": [0.23105146461978, -0.17714866186662, -0.52068170697159, 1.3339497589093], "营业税金及附加": [31030000, 26890000, 51830000, 45590000, 23820000], "少数股东损益": [-476700, -2057000, -1335000, -57360, -54960], "投资收益": [211200000, 200600000, 45240000, 38920000, 0], "其他综合收益": [5213000, -8561000, -464300, 137600, 2528], "扣除非经常性损益后的净利润": [947200000, 615600000, 595100000, 1796000000, 162900000], "综合收益总额": [963400000, 626300000, 712000000, 1849000000, 165700000], "归属于少数股东的其他综合收益": [0, 37520, -23690, 12320, 0], "归属于少数股东的综合收益总额": [-476700, -2020000, -1358000, -45050, -54960], "稀释每股收益": [0.19, 0.12, 0.17, 0.61, 0.09], "归属于母公司所有者的综合收益总额": [963900000, 628300000, 713300000, 1849000000, 165700000], "毛利润": [2751700000, 2150000000, 2028900000, 2601900000, 463400000], "营业收入": [1310000000, 1112000000, 1203000000, 2813000000, 612000000], "营业成本": [371300000, 397000000, 323100000, 324100000, 148600000], "加:公允价值变动收益": [49210000, -21790000, -24990000, 22360000, 0], "利息收入": [618300000, 415600000, 235100000, 6563000, 0], "减:营业外支出": [9931000, 3478000, 9431000, 2813000, 1513000], "利润表": ["2018-12-31", "2017-12-31", "2016-12-31", "2015-12-31", "2014-12-31"]}};

		
	    function drawChart(chartType) {
		    console.log(chartType);
		    myChart.setOption(options[chartType]);
		}
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('main'));
		var options = {};
        options['loans_line'] = {
			title: {
				text: '负债折线图'
			},
			tooltip: {
				trigger: 'axis', 
				formatter: function (params, ticket, callback) {
				    var tooltipHtml = params[0].name + '<br>';
					for(var i = 0, plen = params.length; i < plen; i++) {
					    tooltipHtml += params[i].marker + params[i].seriesName + ': ' + (params[i].value / 100000000).toFixed(2) + '亿<br>'
					}
					return tooltipHtml;
				}
			},
			legend: {
				data:['短期借款','应付债券','货币资金']
			},
			grid: {
				left: '3%',
				right: '4%',
				bottom: '3%',
				containLabel: true
			},
			toolbox: {
				feature: {
					saveAsImage: {}
				}
			},
			xAxis: {
				type: 'category',
				boundaryGap: false,
				data: ['2014-12-31', '2015-12-31', '2016-12-31', '2017-12-31', '2018-12-31']
			},
			yAxis: {
				type: 'value',
				name: '金额', 
				axisLabel: {
				    formatter: function (value, index) {
					    return (value / 100000000) + '亿';
					}
				}
			},
			series: [
				{
					name:'短期借款',
					type:'line',
					data:[0, 0, 73580000, 298000000, 213100000]
				},
				{
					name:'应付债券',
					type:'line',
					data:[0, 500000000, 300000000, 5408000000, 4815000000]
				},
				{
					name:'货币资金',
					type:'line',
					data:[4028000000, 12250000000, 9694000000, 12080000000, 11330000000]
				}
			]
		};
		
		options['loans_stack_bar'] = {
			title: {
				text: '负债叠柱图'
			},
			tooltip : {
				trigger: 'axis',
				axisPointer : {            // 坐标轴指示器，坐标轴触发有效
					type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
				}, 
				formatter: function (params, ticket, callback) {
				    var tooltipHtml = params[0].name + '<br>';
					for(var i = 0, plen = params.length; i < plen; i++) {
					    tooltipHtml += params[i].marker + params[i].seriesName + ': ' + (params[i].value / 100000000).toFixed(2) + '亿<br>'
					}
					return tooltipHtml;
				}
			},
			legend: {
				data:['短期借款','应付债券','货币资金']
			},
			grid: {
				left: '3%',
				right: '4%',
				bottom: '3%',
				containLabel: true
			},
			xAxis : [
				{
					type : 'category',
					data : ['2014-12-31', '2015-12-31', '2016-12-31', '2017-12-31', '2018-12-31']
				}
			],
			yAxis : {
				type : 'value', 
				axisLabel: {
					formatter: function (value, index) {
						return (value / 100000000) + '亿';
					}
				}
			},
			series : [
				{
					name:'短期借款',
					type:'bar',
					stack: '负债',
					data:[0, 0, 73580000, 298000000, 213100000]
				},
				{
					name:'应付债券',
					type:'bar',
					stack: '负债',
					data:[0, 500000000, 300000000, 5408000000, 4815000000]
				}, 
				{
					name:'货币资金',
					type:'bar',
					data:[4028000000, 12250000000, 9694000000, 12080000000, 11330000000]
				}
			]
		};
		
		options['yoy_line'] = {
			title: {
				text: '同比折线图'
			},
			tooltip: {
				trigger: 'axis', 
				formatter: function (params, ticket, callback) {
				    var tooltipHtml = params[0].name + '<br>';
					for(var i = 0, plen = params.length; i < plen; i++) {
					    tooltipHtml += params[i].marker + params[i].seriesName + ': ' + params[i].value + '%<br>'
					}
					return tooltipHtml;
				}
			},
			legend: {
				data:['营业收入同比','净利润同比','毛利率同比','净利率同比','存货同比']
			},
			grid: {
				left: '3%',
				right: '4%',
				bottom: '3%',
				containLabel: true
			},
			toolbox: {
				feature: {
					saveAsImage: {}
				}
			},
			xAxis: {
				type: 'category',
				boundaryGap: false,
				data: ['2015-12-31', '2016-12-31', '2017-12-31', '2018-12-31']
			},
			yAxis: {
				type: 'value',
				name: '百分比', 
				axisLabel: {
					formatter: '{value} %'
				}
			},
			series: [
				{
					name:'营业收入同比',
					type:'line',
					data:[378.10, -19.62, 8.29, 22.61]
				},
				{
					name:'净利润同比',
					type:'line',
					data:[1015.87, -61.40, -10.77, 50.53]
				},
				{
					name:'毛利率同比',
					type:'line',
					data:[17.44, -2.99, -2.14, 4.38]
				},
				{
					name:'净利率同比',
					type:'line',
					data:[133.39, -52.07, -17.71, 23.11]
				},
				{
					name:'存货同比',
					type:'line',
					data:[0.00, 0.00, 5.41, 2.46]
				}
			]
		};

        // 使用刚指定的配置项和数据显示图表。
        drawChart('loans_line');
    </script>
</body>
</html>