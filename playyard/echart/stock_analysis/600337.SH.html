<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Financial Statement Analysis</title>
    <!-- 引入 echarts.js -->
    <script src="echarts/echarts.min.js"></script>
</head>
<body>
	<select>
		<option value="000651.sz">格力电器</option>
		<option value="002415.sz">海康威视</option>
		<option value="300059.sz">东方财富</option>
		<option value="600337.sh">美克家居</option>
		<option value="600338.sh">西藏珠峰</option>
	</select>
	<nav>
	<a href="javascript:void(0);" onclick="drawChart('loans_line');">负债折线图</a> |
	<a href="javascript:void(0);" onclick="drawChart('loans_stack_bar');">负债叠柱图</a> |
	<a href="javascript:void(0);" onclick="drawChart('yoy_line');">同比折线图</a> |
	<a href="javascript:void(0);" onclick="drawChart('HTML');">图4</a>
	</nav>
    <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
    <div id="main" style="width: 50vw;height:50vh;"></div>
    <script type="text/javascript">
	    var dataMap = {};
		dataMap["600337.SH"] = {"balancesheet": {"资产负债表": ["2018-12-31", "2017-12-31", "2016-12-31", "2015-12-31", "2014-12-31"], "递延所得税资产": [69820000, 31070000, 40390000, 41310000, 53640000], "应付职工薪酬": [72400000, 64060000, 55430000, 57890000, 68900000], "长期借款": [831500000, 630600000, 148600000, 172900000, 200000000], "流动负债合计": [2994000000, 1309000000, 1735000000, 1538000000, 945000000], "流动负债": [], "长期待摊费用": [456400000, 327400000, 257100000, 215100000, 124900000], "存货": [2299000000, 1537000000, 1657000000, 1742000000, 1442000000], "固定资产": [1442000000, 1403000000, 1405000000, 1175000000, 1167000000], "长期股权投资": [0, 0, 8418000, 9473000, 0], "在建工程": [449900000, 219800000, 156000000, 354100000, 149900000], "无形资产": [665600000, 499600000, 443600000, 322600000, 333500000], "非流动负债": [], "资本公积": [1270000000, 1385000000, 938800000, 945700000, 950100000], "少数股东权益": [19130000, 0, 0, 0, 0], "其他非流动资产": [0, 36680000, 0, 0, 0], "归属于母公司股东权益合计": [4802000000, 4932000000, 3205000000, 3055000000, 2851000000], "递延收益": [42700000, 0, 0, 0, 0], "未分配利润": [1744000000, 1525000000, 1382000000, 1287000000, 1108000000], "盈余公积": [299700000, 262400000, 233600000, 197900000, 172600000], "资产总计": [8763000000, 6925000000, 5143000000, 4819000000, 3996000000], "可供出售金融资产": [36570000, 70500000, 0, 0, 0], "库存股": [281400000, 15000000, 0, 3939000, 0], "股东权益合计": [4821000000, 4932000000, 3205000000, 3055000000, 2851000000], "非流动资产": [], "实收资本（或股本）": [1775000000, 1806000000, 645000000, 646300000, 646800000], "流动资产合计": [5560000000, 4227000000, 2762000000, 2631000000, 2096000000], "应付票据": [374200000, 33400000, 116500000, 91190000, 23140000], "存货同比": [0.49577098243331, -0.072420036210018, -0.048794489092997, 0.20804438280166], "货币资金": [2058000000, 1794000000, 392500000, 451500000, 196900000], "预付款项": [344200000, 251200000, 231400000, 269900000, 260600000], "应交税费": [126800000, 205000000, 146500000, 106000000, 40990000], "其他非流动负债": [0, 443000, 1002000, 706700, 639000], "所有者权益(或股东权益)": [], "应付利息": [0, 1122000, 1568000, 1580000, 509700], "短期借款": [1344000000, 110800000, 514400000, 376400000, 157800000], "长期应付款": [70160000, 53180000, 53140000, 53000000, 0], "负债和股东权益合计": [8763000000, 6925000000, 5143000000, 4819000000, 3996000000], "负债合计": [3942000000, 1993000000, 1938000000, 1764000000, 1146000000], "开发支出": [0, 39890000, 0, 0, 0], "应收账款": [339400000, 224600000, 129100000, 105800000, 145500000], "长期应收款": [1611000, 0, 0, 0, 0], "一年内到期的非流动负债": [441800000, 137700000, 287900000, 200000000, 0], "流动资产": [], "其他应收款": [108200000, 82040000, 58300000, 61670000, 50760000], "其他应付款": [95120000, 72590000, 44120000, 132100000, 75190000], "长期应付职工薪酬": [3208000, 0, 0, 0, 0], "非流动资产合计": [3203000000, 2698000000, 2381000000, 2189000000, 1901000000], "其他流动负债": [0, 0, 0, 390300, 307000], "应付账款": [394800000, 258200000, 261900000, 257600000, 197600000], "预收款项": [145200000, 427100000, 307000000, 314500000, 380600000], "递延所得税负债": [0, 0, 0, 129900, 146900], "应收票据": [224000, 0, 0, 0, 0], "商誉": [62970000, 49070000, 49070000, 49070000, 49070000], "投资性房地产": [18280000, 20830000, 21240000, 21920000, 22590000], "其他流动资产": [410600000, 338200000, 293200000, 0, 0], "非流动负债合计": [947600000, 684200000, 202800000, 226700000, 200800000]}, "profitstatement": {"减:所得税费用": [93640000, 81510000, 66160000, 76630000, 74720000], "加:投资收益": [18600000, 11970000, 1657000, -516900, -478800], "净利率": [0.08464170309827, 0.087437185929648, 0.095413902509374, 0.10514165792235, 0.086072218128224], "净利润": [445300000, 365400000, 330800000, 300600000, 233600000], "归属于母公司股东的其他综合收益": [25500000, -36570000, 23160000, 9411000, -1032000], "其中:非流动资产处置利得": [0, 0, 374100, 223000, 135900], "财务费用": [85360000, 61850000, 68300000, 40480000, 20770000], "利润总额": [539000000, 446900000, 397000000, 377200000, 308300000], "销售费用": [1576000000, 1318000000, 1176000000, 1021000000, 971200000], "研发费用": [69440000, 52520000, 0, 0, 0], "营业利润": [536700000, 445900000, 391200000, 372300000, 296200000], "营业总收入": [5261000000, 4179000000, 3467000000, 2859000000, 2714000000], "管理费用": [475300000, 344100000, 315800000, 285800000, 275300000], "基本每股收益": [0.25, 0.24, 0.22, 0.46, 0.36], "资产减值损失": [5352000, 7049000, 4753000, 3349000, 7076000], "营业总成本": [4788000000, 3770000000, 3076000000, 2486000000, 2417000000], "其中:归属于母公司股东的净利润": [451200000, 365400000, 330800000, 300600000, 233600000], "其他经营收益": [], "其中:非流动资产处置净损失": [0, 0, 1213000, 3451000, 574200], "每股收益": [], "加:营业外收入": [7987000, 1709000, 8524000, 10900000, 14020000], "毛利率同比": [-0.037253931355672, -0.058511557668999, -0.06099239008894, 0.044032489992616], "净利率同比": [-0.031971326634725, -0.083601198252447, -0.092520468149366, 0.22155162500539], "营业税金及附加": [59700000, 71460000, 39450000, 28110000, 21860000], "归母净利润同比": [0.23481116584565, 0.10459492140266, 0.10046573519627, 0.28681506849315], "营业总收入同比": [0.25891361569754, 0.20536486876262, 0.2126617698496, 0.053426676492262], "毛利率": [0.52157384527656, 0.54175640105288, 0.57542543986155, 0.61280167890871, 0.58695652173913], "其他综合收益": [27030000, -36570000, 23160000, 9411000, -1032000], "综合收益总额": [472400000, 328800000, 354000000, 310000000, 232500000], "稀释每股收益": [0.25, 0.24, 0.22, 0.46, 0.36], "归属于少数股东的综合收益总额": [-4357000, 0, 0, 0, 0], "归属于少数股东的其他综合收益": [1529000, 0, 0, 0, 0], "归属于母公司所有者的综合收益总额": [476700000, 328800000, 354000000, 310000000, 232500000], "毛利润": [2744000000, 2264000000, 1995000000, 1752000000, 1593000000], "营业收入": [5261000000, 4179000000, 3467000000, 2859000000, 2714000000], "营业成本": [2517000000, 1915000000, 1472000000, 1107000000, 1121000000], "减:营业外支出": [5726000, 778600, 2765000, 5936000, 1959000], "扣除非经常性损益后的净利润": [395400000, 332500000, 325700000, 297000000, 221900000], "少数股东损益": [-5885000, 0, 0, 0, 0], "利润表": ["2018-12-31", "2017-12-31", "2016-12-31", "2015-12-31", "2014-12-31"]}};

		
	    function drawChart(chartType) {
		    console.log(chartType);
		    myChart.setOption(options[chartType]);
		}
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('main'));
		var options = {};
        options['loans_line'] = {
			title: {
				text: '负债折线图'
			},
			tooltip: {
				trigger: 'axis', 
				formatter: function (params, ticket, callback) {
				    var tooltipHtml = params[0].name + '<br>';
					for(var i = 0, plen = params.length; i < plen; i++) {
					    tooltipHtml += params[i].marker + params[i].seriesName + ': ' + (params[i].value / 100000000).toFixed(2) + '亿<br>'
					}
					return tooltipHtml;
				}
			},
			legend: {
				data:['短期借款','长期借款','货币资金']
			},
			grid: {
				left: '3%',
				right: '4%',
				bottom: '3%',
				containLabel: true
			},
			toolbox: {
				feature: {
					saveAsImage: {}
				}
			},
			xAxis: {
				type: 'category',
				boundaryGap: false,
				data: ['2014-12-31', '2015-12-31', '2016-12-31', '2017-12-31', '2018-12-31']
			},
			yAxis: {
				type: 'value',
				name: '金额', 
				axisLabel: {
				    formatter: function (value, index) {
					    return (value / 100000000) + '亿';
					}
				}
			},
			series: [
				{
					name:'短期借款',
					type:'line',
					data:[157800000, 376400000, 514400000, 110800000, 1344000000]
				},
				{
					name:'长期借款',
					type:'line',
					data:[200000000, 172900000, 148600000, 630600000, 831500000]
				},
				{
					name:'货币资金',
					type:'line',
					data:[196900000, 451500000, 392500000, 1794000000, 2058000000]
				}
			]
		};
		
		options['loans_stack_bar'] = {
			title: {
				text: '负债叠柱图'
			},
			tooltip : {
				trigger: 'axis',
				axisPointer : {            // 坐标轴指示器，坐标轴触发有效
					type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
				}, 
				formatter: function (params, ticket, callback) {
				    var tooltipHtml = params[0].name + '<br>';
					for(var i = 0, plen = params.length; i < plen; i++) {
					    tooltipHtml += params[i].marker + params[i].seriesName + ': ' + (params[i].value / 100000000).toFixed(2) + '亿<br>'
					}
					return tooltipHtml;
				}
			},
			legend: {
				data:['短期借款','长期借款','货币资金']
			},
			grid: {
				left: '3%',
				right: '4%',
				bottom: '3%',
				containLabel: true
			},
			xAxis : [
				{
					type : 'category',
					data : ['2014-12-31', '2015-12-31', '2016-12-31', '2017-12-31', '2018-12-31']
				}
			],
			yAxis : {
				type : 'value', 
				axisLabel: {
					formatter: function (value, index) {
						return (value / 100000000) + '亿';
					}
				}
			},
			series : [
				{
					name:'短期借款',
					type:'bar',
					stack: '负债',
					data:[157800000, 376400000, 514400000, 110800000, 1344000000]
				},
				{
					name:'长期借款',
					type:'bar',
					stack: '负债',
					data:[200000000, 172900000, 148600000, 630600000, 831500000]
				}, 
				{
					name:'货币资金',
					type:'bar',
					data:[196900000, 451500000, 392500000, 1794000000, 2058000000]
				}
			]
		};
		
		options['yoy_line'] = {
			title: {
				text: '同比折线图'
			},
			tooltip: {
				trigger: 'axis', 
				formatter: function (params, ticket, callback) {
				    var tooltipHtml = params[0].name + '<br>';
					for(var i = 0, plen = params.length; i < plen; i++) {
					    tooltipHtml += params[i].marker + params[i].seriesName + ': ' + params[i].value + '%<br>'
					}
					return tooltipHtml;
				}
			},
			legend: {
				data:['营业收入同比','净利润同比','毛利率同比','净利率同比','存货同比']
			},
			grid: {
				left: '3%',
				right: '4%',
				bottom: '3%',
				containLabel: true
			},
			toolbox: {
				feature: {
					saveAsImage: {}
				}
			},
			xAxis: {
				type: 'category',
				boundaryGap: false,
				data: ['2015-12-31', '2016-12-31', '2017-12-31', '2018-12-31']
			},
			yAxis: {
				type: 'value',
				name: '百分比', 
				axisLabel: {
					formatter: '{value} %'
				}
			},
			series: [
				{
					name:'营业收入同比',
					type:'line',
					data:[5.34, 21.27, 20.54, 25.89]
				},
				{
					name:'净利润同比',
					type:'line',
					data:[28.68, 10.05, 10.46, 23.48]
				},
				{
					name:'毛利率同比',
					type:'line',
					data:[4.40, -6.10, -5.85, -3.73]
				},
				{
					name:'净利率同比',
					type:'line',
					data:[22.16, -9.25, -8.36, -3.20]
				},
				{
					name:'存货同比',
					type:'line',
					data:[20.80, -4.88, -7.24, 49.58]
				}
			]
		};

        // 使用刚指定的配置项和数据显示图表。
        drawChart('loans_line');
    </script>
</body>
</html>