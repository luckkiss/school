<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Financial Statement Analysis</title>
    <!-- 引入 echarts.js -->
    <script src="echarts/echarts.min.js"></script>
</head>
<body>
	<select>
		<option value="000651.sz">格力电器</option>
		<option value="002415.sz">海康威视</option>
		<option value="300059.sz">东方财富</option>
		<option value="600337.sh">美克家居</option>
		<option value="600338.sh">西藏珠峰</option>
	</select>
	<nav>
	<a href="javascript:void(0);" onclick="drawChart('loans_line');">负债折线图</a> |
	<a href="javascript:void(0);" onclick="drawChart('loans_stack_bar');">负债叠柱图</a> |
	<a href="javascript:void(0);" onclick="drawChart('yoy_line');">同比折线图</a> |
	<a href="javascript:void(0);" onclick="drawChart('HTML');">图4</a>
	</nav>
    <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
    <div id="main" style="width: 50vw;height:50vh;"></div>
    <script type="text/javascript">
	    var dataMap = {};
		dataMap["002415.SZ"] = {"balancesheet": {"资产负债表": ["2018-12-31", "2017-12-31", "2016-12-31", "2015-12-31", "2014-12-31"], "递延所得税资产": [534300000, 479100000, 375300000, 261200000, 96080000], "应付职工薪酬": [1922000000, 1391000000, 1085000000, 788100000, 656100000], "长期借款": [440000000, 490000000, 1722000000, 675800000, 244800000], "流动负债合计": [24710000000, 17200000000, 12130000000, 10270000000, 6112000000], "以公允价值计量且其变动计入当期损益的金融资产": [1860000, 4101000, 15550000, 6160000, 3033000], "预计负债": [77630000, 63070000, 41930000, 61830000, 36660000], "以公允价值计量且其变动计入当期损益的金融负债": [291000, 15950000, 69790000, 19280000, 0], "固定资产": [5082000000, 3024000000, 2854000000, 1887000000, 1500000000], "长期股权投资": [163300000, 130500000, 35000000, 0, 0], "在建工程": [416100000, 1436000000, 316500000, 844600000, 28960000], "无形资产": [869900000, 429200000, 410500000, 343200000, 96550000], "股东权益合计": [37960000000, 30600000000, 24480000000, 19300000000, 14880000000], "少数股东权益": [374000000, 246000000, 192800000, 43650000, 36910000], "归属于母公司股东权益合计": [37590000000, 30360000000, 24290000000, 19250000000, 14840000000], "其他非流动资产": [1583000000, 858800000, 41000000, 18000000, 254800000], "未分配利润": [22360000000, 16600000000, 14860000000, 12200000000, 8510000000], "递延收益": [293200000, 88930000, 10830000, 0, 14810000], "盈余公积": [4461000000, 3484000000, 2615000000, 1895000000, 1340000000], "库存股": [365000000, 744600000, 300200000, 518100000, 547900000], "资产总计": [63480000000, 51570000000, 41350000000, 30320000000, 21290000000], "可供出售金融资产": [291000000, 287500000, 283800000, 56030000, 604300], "资本公积": [1956000000, 1819000000, 1048000000, 1640000000, 1480000000], "一年内到期的非流动资产": [380800000, 66570000, 0, 0, 0], "非流动资产": [], "商誉": [212300000, 249000000, 248400000, 117900000, 117900000], "应付债券": [0, 3121000000, 2954000000, 0, 0], "应付票据": [463500000, 845400000, 876800000, 209700000, 274000000], "存货同比": [0.15890688259109, 0.28981723237598, 0.35863781482795, 0.22993019197208], "一年内到期的非流动负债": [3178000000, 1546000000, 15340000, 586400000, 0], "预付款项": [460300000, 527600000, 279000000, 132700000, 65310000], "应交税费": [1419000000, 1454000000, 1206000000, 822300000, 394500000], "应收票据": [2569000000, 3637000000, 2843000000, 3044000000, 1876000000], "所有者权益(或股东权益)": [], "长期应付款": [0, 2437000, 7000000, 7000000, 3000000], "短期借款": [3466000000, 97110000, 32290000, 876600000, 362300000], "非流动负债": [], "负债和股东权益合计": [63480000000, 51570000000, 41350000000, 30320000000, 21290000000], "负债合计": [25520000000, 20970000000, 16870000000, 11020000000, 6411000000], "其他应付款": [2953000000, 496700000, 1049000000, 159900000, 51570000], "应收账款": [16620000000, 14710000000, 11240000000, 8126000000, 4282000000], "长期应收款": [705500000, 23380000, 251600000, 105900000, 87320000], "应付股利": [0, 94860000, 20110000, 24130000, 4402000], "流动资产": [], "其他应收款": [586700000, 583700000, 528600000, 335300000, 255300000], "应付利息": [0, 0, 0, 4669000, 0], "流动资产合计": [53630000000, 44650000000, 36530000000, 26680000000, 19110000000], "非流动资产合计": [9858000000, 6918000000, 4816000000, 3634000000, 2183000000], "其他流动负债": [365000000, 744600000, 300200000, 518100000, 547900000], "应付账款": [10300000000, 10040000000, 7009000000, 5870000000, 3318000000], "预收款项": [641400000, 570600000, 469800000, 395500000, 503100000], "流动负债": [], "其他流动资产": [730700000, 3720000000, 4154000000, 2113000000, 3135000000], "存货": [5725000000, 4940000000, 3830000000, 2819000000, 2292000000], "实收资本（或股本）": [9227000000, 9229000000, 6103000000, 4069000000, 4069000000], "货币资金": [26550000000, 16470000000, 13640000000, 10110000000, 7200000000], "非流动负债合计": [810800000, 3765000000, 4736000000, 744600000, 299200000]}, "profitstatement": {"减:所得税费用": [1057000000, 1109000000, 889900000, 867600000, 525600000], "净利率": [0.22833065810594, 0.22376521116679, 0.23250861259004, 0.23276612584092, 0.27167730702263], "净利润": [11380000000, 9378000000, 7424000000, 5882000000, 4681000000], "其中:对联营企业和合营企业的投资收益": [-9073000, -2525000, 0, 0, 0], "归属于母公司股东的其他综合收益": [-21900000, 13550000, -13570000, -18820000, -10760000], "其中:非流动资产处置利得": [0, 0, 203900, 2829000, 375100], "财务费用": [-424300000, 265400000, -225300000, -152900000, -82030000], "利润总额": [12440000000, 10490000000, 8314000000, 6750000000, 5206000000], "销售费用": [5893000000, 4430000000, 2991000000, 2179000000, 1533000000], "研发费用": [4483000000, 3194000000, 0, 0, 0], "营业利润": [12340000000, 10440000000, 6833000000, 5494000000, 4378000000], "营业总收入": [49840000000, 41910000000, 31930000000, 25270000000, 17230000000], "管理费用": [1376000000, 1011000000, 3109000000, 2211000000, 1646000000], "基本每股收益": [1.24, 1.03, 0.82, 0.98, 1.17], "资产减值损失": [426900000, 484600000, 317600000, 338900000, 182900000], "营业总成本": [39660000000, 33220000000, 25100000000, 19910000000, 13010000000], "其中:归属于母公司股东的净利润": [11350000000, 9411000000, 7424000000, 5869000000, 4665000000], "其他经营收益": [], "其中:非流动资产处置净损失": [0, 0, 940000, 1114000, 842400], "营业总收入同比": [0.18921498449058, 0.31255872220482, 0.26355362089434, 0.46662797446315], "毛利率同比": [0.019648558684972, 0.057898738835083, 0.037516358742548, -0.09736011556114], "每股收益": [], "加:营业外收入": [111400000, 46730000, 1511000000, 1294000000, 856500000], "归母净利润同比": [0.20603549038359, 0.26764547413793, 0.26495143976827, 0.25809217577706], "净利率同比": [0.020402845086362, -0.037604634623454, -0.0011063175534974, -0.14322573205746], "营业税金及附加": [418300000, 371000000, 255300000, 196900000, 151700000], "毛利率": [0.44863563402889, 0.43999045573849, 0.41590980269339, 0.4008705975465, 0.44410911201393], "投资收益": [51930000, 44650000, 40490000, 148700000, 151000000], "扣除非经常性损益后的净利润": [10980000000, 9177000000, 7271000000, 5605000000, 4475000000], "归属于少数股东的其他综合收益": [-2165000, 299800, 883000, 833400, -903500], "稀释每股收益": [1.23, 1.02, 0.82, 0.97, 1.16], "综合收益总额": [11360000000, 9391000000, 7412000000, 5864000000, 4669000000], "归属于少数股东的综合收益总额": [26660000, -33050000, 1422000, 14180000, 14430000], "其他综合收益": [-24060000, 13850000, -12690000, -17990000, -11660000], "归属于母公司所有者的综合收益总额": [11330000000, 9424000000, 7410000000, 5850000000, 4655000000], "毛利润": [22360000000, 18440000000, 13280000000, 10130000000, 7652000000], "营业收入": [49840000000, 41910000000, 31930000000, 25270000000, 17230000000], "营业成本": [27480000000, 23470000000, 18650000000, 15140000000, 9578000000], "少数股东损益": [28820000, -33350000, 539100, 13350000, 15330000], "加:公允价值变动收益": [13410000, 42090000, -40170000, -16150000, 3033000], "减:营业外支出": [8593000, 3020000, 29910000, 37930000, 27690000], "利润表": ["2018-12-31", "2017-12-31", "2016-12-31", "2015-12-31", "2014-12-31"]}};

		
	    function drawChart(chartType) {
		    console.log(chartType);
		    myChart.setOption(options[chartType]);
		}
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('main'));
		var options = {};
        options['loans_line'] = {
			title: {
				text: '负债折线图'
			},
			tooltip: {
				trigger: 'axis', 
				formatter: function (params, ticket, callback) {
				    var tooltipHtml = params[0].name + '<br>';
					for(var i = 0, plen = params.length; i < plen; i++) {
					    tooltipHtml += params[i].marker + params[i].seriesName + ': ' + (params[i].value / 100000000).toFixed(2) + '亿<br>'
					}
					return tooltipHtml;
				}
			},
			legend: {
				data:['短期借款','长期借款','货币资金']
			},
			grid: {
				left: '3%',
				right: '4%',
				bottom: '3%',
				containLabel: true
			},
			toolbox: {
				feature: {
					saveAsImage: {}
				}
			},
			xAxis: {
				type: 'category',
				boundaryGap: false,
				data: ['2014-12-31', '2015-12-31', '2016-12-31', '2017-12-31', '2018-12-31']
			},
			yAxis: {
				type: 'value',
				name: '金额', 
				axisLabel: {
				    formatter: function (value, index) {
					    return (value / 100000000) + '亿';
					}
				}
			},
			series: [
				{
					name:'短期借款',
					type:'line',
					data:[362300000, 876600000, 32290000, 97110000, 3466000000]
				},
				{
					name:'长期借款',
					type:'line',
					data:[244800000, 675800000, 1722000000, 490000000, 440000000]
				},
				{
					name:'货币资金',
					type:'line',
					data:[7200000000, 10110000000, 13640000000, 16470000000, 26550000000]
				}
			]
		};
		
		options['loans_stack_bar'] = {
			title: {
				text: '负债叠柱图'
			},
			tooltip : {
				trigger: 'axis',
				axisPointer : {            // 坐标轴指示器，坐标轴触发有效
					type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
				}, 
				formatter: function (params, ticket, callback) {
				    var tooltipHtml = params[0].name + '<br>';
					for(var i = 0, plen = params.length; i < plen; i++) {
					    tooltipHtml += params[i].marker + params[i].seriesName + ': ' + (params[i].value / 100000000).toFixed(2) + '亿<br>'
					}
					return tooltipHtml;
				}
			},
			legend: {
				data:['短期借款','长期借款','货币资金']
			},
			grid: {
				left: '3%',
				right: '4%',
				bottom: '3%',
				containLabel: true
			},
			xAxis : [
				{
					type : 'category',
					data : ['2014-12-31', '2015-12-31', '2016-12-31', '2017-12-31', '2018-12-31']
				}
			],
			yAxis : {
				type : 'value', 
				axisLabel: {
					formatter: function (value, index) {
						return (value / 100000000) + '亿';
					}
				}
			},
			series : [
				{
					name:'短期借款',
					type:'bar',
					stack: '负债',
					data:[362300000, 876600000, 32290000, 97110000, 3466000000]
				},
				{
					name:'长期借款',
					type:'bar',
					stack: '负债',
					data:[244800000, 675800000, 1722000000, 490000000, 440000000]
				}, 
				{
					name:'货币资金',
					type:'bar',
					data:[7200000000, 10110000000, 13640000000, 16470000000, 26550000000]
				}
			]
		};
		
		options['yoy_line'] = {
			title: {
				text: '同比折线图'
			},
			tooltip: {
				trigger: 'axis', 
				formatter: function (params, ticket, callback) {
				    var tooltipHtml = params[0].name + '<br>';
					for(var i = 0, plen = params.length; i < plen; i++) {
					    tooltipHtml += params[i].marker + params[i].seriesName + ': ' + params[i].value + '%<br>'
					}
					return tooltipHtml;
				}
			},
			legend: {
				data:['营业收入同比','净利润同比','毛利率同比','净利率同比','存货同比']
			},
			grid: {
				left: '3%',
				right: '4%',
				bottom: '3%',
				containLabel: true
			},
			toolbox: {
				feature: {
					saveAsImage: {}
				}
			},
			xAxis: {
				type: 'category',
				boundaryGap: false,
				data: ['2015-12-31', '2016-12-31', '2017-12-31', '2018-12-31']
			},
			yAxis: {
				type: 'value',
				name: '百分比', 
				axisLabel: {
					formatter: '{value} %'
				}
			},
			series: [
				{
					name:'营业收入同比',
					type:'line',
					data:[46.66, 26.36, 31.26, 18.92]
				},
				{
					name:'净利润同比',
					type:'line',
					data:[25.81, 26.50, 26.76, 20.60]
				},
				{
					name:'毛利率同比',
					type:'line',
					data:[-9.74, 3.75, 5.79, 1.96]
				},
				{
					name:'净利率同比',
					type:'line',
					data:[-14.32, -0.11, -3.76, 2.04]
				},
				{
					name:'存货同比',
					type:'line',
					data:[22.99, 35.86, 28.98, 15.89]
				}
			]
		};

        // 使用刚指定的配置项和数据显示图表。
        drawChart('loans_line');
    </script>
</body>
</html>